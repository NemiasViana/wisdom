<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WisdomInvestNEXUS</title>
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React e ReactDOM -->
  <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Babel para compilar JSX no navegador -->
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
  <!-- Lucide React -->
  <script src="https://cdn.jsdelivr.net/npm/lucide-react@0.263.0/dist/umd/lucide-react.min.js"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const { 
      Search, TrendingUp, Brain, PieChart, Target, BarChart3, 
      CheckCircle, Star, Newspaper, Globe, Zap, Shield, Rocket, 
      Building, Coins, Eye, Bell, Users, Home, Briefcase, 
      Crown, Diamond, Gem, Sparkles, Mic, MicOff, Glasses, 
      Leaf, X, Send, Store, ExternalLink 
    } = window.lucide;

    const WisdomInvestNEXUS = () => {
      // Estados
      const [selectedAsset, setSelectedAsset] = useState('');
      const [analysisResult, setAnalysisResult] = useState(null);
      const [activeTab, setActiveTab] = useState('dashboard');
      const [activeAssetType, setActiveAssetType] = useState('all');
      const [isAnalyzing, setIsAnalyzing] = useState(false);
      const [searchTerm, setSearchTerm] = useState('');
      
      // Features
      const [voiceEnabled, setVoiceEnabled] = useState(false);
      const [arMode, setArMode] = useState(false);
      const [xaiMode, setXaiMode] = useState(true);
      const [esgMode, setEsgMode] = useState(true);
      const [onChainMode, setOnChainMode] = useState(true);
      
      // Modais
      const [showAIChat, setShowAIChat] = useState(false);
      const [showNews, setShowNews] = useState(false);
      const [showMarketplace, setShowMarketplace] = useState(false);
      
      // Tempo real
      const [currentTime, setCurrentTime] = useState(new Date());
      const [marketStatus, setMarketStatus] = useState('open');
      const [edgeLatency, setEdgeLatency] = useState(12);
      
      // Dados do portfólio
      const [portfolio] = useState([
        { symbol: 'PETR4', name: 'Petrobras', type: 'Ação', quantity: 100, avgPrice: 38.50, currentPrice: 38.90, esgScore: 72, sector: 'Petróleo' },
        { symbol: 'ITUB4', name: 'Itaú Unibanco', type: 'Ação', quantity: 200, avgPrice: 31.80, currentPrice: 32.50, esgScore: 85, sector: 'Bancário' },
        { symbol: 'HGLG11', name: 'CSHG Logística', type: 'FII', quantity: 50, avgPrice: 95.20, currentPrice: 98.40, esgScore: 78, sector: 'Logística' },
        { symbol: 'BTCUSD', name: 'Bitcoin', type: 'Crypto', quantity: 0.5, avgPrice: 65000, currentPrice: 69420, esgScore: 45, sector: 'Store of Value' }
      ]);

      // Base de dados de ativos
      const assets = {
        'ITUB4': { name: 'Itaú Unibanco', type: 'Ação', price: 'R$ 32,50', yield: '8.2%', sector: 'Bancário', pe: 8.5, roe: 18.2, change: '+2.1%', recommendation: 'COMPRAR', esgScore: 85, fundamentalScore: 88, technicalScore: 82 },
        'PETR4': { name: 'Petrobras', type: 'Ação', price: 'R$ 38,90', yield: '12.8%', sector: 'Petróleo', pe: 4.2, roe: 35.8, change: '-0.5%', recommendation: 'MANTER', esgScore: 72, fundamentalScore: 92, technicalScore: 75 },
        'BPAC11': { name: 'BTG Pactual', type: 'Ação', price: 'R$ 35,40', yield: '12.3%', sector: 'Bancário', pe: 8.2, roe: 23.1, change: '+4.2%', recommendation: 'FORTE COMPRA', esgScore: 79, fundamentalScore: 95, technicalScore: 89 },
        'TOTS3': { name: 'TOTVS', type: 'Ação', price: 'R$ 28,90', yield: '3.2%', sector: 'Tecnologia', pe: 18.5, roe: 35.2, change: '+6.8%', recommendation: 'FORTE COMPRA', esgScore: 88, fundamentalScore: 91, technicalScore: 94 },
        'HGLG11': { name: 'CSHG Logística', type: 'FII', price: 'R$ 98,40', yield: '11.5%', sector: 'Logística', recommendation: 'COMPRAR', esgScore: 82, fundamentalScore: 88, technicalScore: 76 },
        'HCRI11': { name: 'Hospital Care REIT', type: 'FII', price: 'R$ 98,40', yield: '14.2%', sector: 'Saúde', recommendation: 'FORTE COMPRA', esgScore: 94, fundamentalScore: 93, technicalScore: 81 },
        'BTCUSD': { name: 'Bitcoin', type: 'Crypto', price: '$69,420', yield: '-', sector: 'Store of Value', change: '+5.2%', recommendation: 'FORTE COMPRA', esgScore: 45, fundamentalScore: 95, technicalScore: 88, onChainData: { whaleMovements: 127, hashRate: '520 EH/s', fearGreedIndex: 78 } },
        'ETHUSD': { name: 'Ethereum', type: 'Crypto', price: '$3,950', yield: '4.8%', sector: 'Smart Contracts', change: '+7.1%', recommendation: 'COMPRAR', esgScore: 78, fundamentalScore: 92, technicalScore: 85 },
        'SOLUSD': { name: 'Solana', type: 'Crypto', price: '$155.80', yield: '7.1%', sector: 'Smart Contracts', change: '+12.4%', recommendation: 'FORTE COMPRA', esgScore: 82, fundamentalScore: 85, technicalScore: 92 }
      };

      // Notícias
      const news = [
        { id: 1, title: "🚀 BTG Pactual EXPLODE: Lucro recorde de R$ 2.8 bilhões no Q1 2025", summary: "Banco digital superou todas as expectativas com crescimento explosivo de 45% em wealth management e 60% em investment banking.", timestamp: "23 minutos atrás", source: "Valor Econômico", relevantAssets: ['BPAC11'], sentiment: "extremely_positive", impact: "very_high", priceImpact: "+8.2%" },
        { id: 2, title: "💎 TOTVS revoluciona IA: Aquisição BILIONÁRIA de startup americana", summary: "Maior aquisição da história da empresa marca entrada definitiva no mercado de inteligência artificial empresarial.", timestamp: "1 hora atrás", source: "InfoMoney", relevantAssets: ['TOTS3'], sentiment: "extremely_positive", impact: "very_high", priceImpact: "+12.4%" },
        { id: 3, title: "⚡ Bitcoin HISTÓRICO: Aprovação de ETF Spot gera tsunami institucional", summary: "CVM aprova primeiro ETF de Bitcoin spot do Brasil. Entrada institucional massiva de R$ 4.2 bilhões em 48 horas.", timestamp: "2 horas atrás", source: "CoinTelegraph Brasil", relevantAssets: ['BTCUSD'], sentiment: "extremely_positive", impact: "revolutionary", priceImpact: "+18.7%" }
      ];

      // Mestres
      const masters = [
        { name: 'Graham', color: 'text-amber-400', strategy: 'Value & Deep Analysis', icon: Shield, weight: 20 },
        { name: 'Buffett', color: 'text-emerald-400', strategy: 'Quality & Moats', icon: Target, weight: 25 },
        { name: 'Barsi', color: 'text-blue-400', strategy: 'Dividend Aristocrats', icon: Coins, weight: 20 },
        { name: 'Lynch', color: 'text-purple-400', strategy: 'Growth at Reasonable Price', icon: Rocket, weight: 15 },
        { name: 'Soros', color: 'text-red-400', strategy: 'Macro & Reflexivity', icon: Globe, weight: 10 },
        { name: 'Renaissance AI', color: 'text-cyan-400', strategy: 'ML Arbitrage', icon: Brain, weight: 10, external: true }
      ];

      // Funções
      const calculateMasterScore = (master, asset) => {
        let score = 50;
        if (master.name === 'Buffett' && asset.roe && asset.roe > 20) score += 25;
        if (master.name === 'Graham' && asset.pe && asset.pe < 15) score += 25;
        if (master.name === 'Barsi' && parseFloat(asset.yield?.replace('%', '') || 0) > 8) score += 25;
        if (master.name === 'Lynch' && asset.technicalScore && asset.technicalScore > 85) score += 25;
        if (master.name === 'Soros' && asset.change?.startsWith('+')) score += 20;
        if (master.name === 'Renaissance AI' && asset.fundamentalScore && asset.fundamentalScore > 90) score += 25;
        return Math.min(98, Math.max(25, score));
      };

      const analyzeAsset = async () => {
        if (!selectedAsset) return;
        setIsAnalyzing(true);
        await new Promise(resolve => setTimeout(resolve, 3000));
        const asset = assets[selectedAsset];
        const scores = {};
        masters.forEach(master => {
          scores[master.name.toLowerCase().replace(/\s+/g, '_')] = calculateMasterScore(master, asset);
        });
        const weightedConsensus = masters.reduce((sum, master) => {
          const scoreKey = master.name.toLowerCase().replace(/\s+/g, '_');
          return sum + (scores[scoreKey] * master.weight / 100);
        }, 0);
        const analysis = {
          asset,
          scores,
          consensus: Math.round(weightedConsensus),
          timestamp: new Date().toLocaleString('pt-BR'),
          relatedNews: news.filter(n => n.relevantAssets.includes(selectedAsset))
        };
        if (analysis.consensus >= 92) analysis.recommendation = 'FORTE COMPRA';
        else if (analysis.consensus >= 82) analysis.recommendation = 'COMPRAR';
        else if (analysis.consensus >= 68) analysis.recommendation = 'MANTER';
        else if (analysis.consensus >= 55) analysis.recommendation = 'AGUARDAR';
        else analysis.recommendation = 'VENDER';
        setAnalysisResult(analysis);
        setIsAnalyzing(false);
      };

      const calculatePortfolioStats = () => {
        const totalInvested = portfolio.reduce((sum, item) => sum + (item.quantity * item.avgPrice), 0);
        const currentValue = portfolio.reduce((sum, item) => sum + (item.quantity * item.currentPrice), 0);
        const totalReturn = currentValue - totalInvested;
        const returnPercentage = totalInvested > 0 ? (totalReturn / totalInvested * 100) : 0;
        const avgEsgScore = portfolio.reduce((sum, item) => sum + (item.esgScore || 0), 0) / portfolio.length;
        return { totalInvested, currentValue, totalReturn, returnPercentage, avgEsgScore };
      };

      const portfolioStats = calculatePortfolioStats();

      const formatCurrency = (value) => {
        return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(value);
      };

      const getMarketStatusColor = () => {
        return marketStatus === 'open' ? 'text-green-400' : 'text-red-400';
      };

      const getMarketStatusText = () => {
        return marketStatus === 'open' ? 'MERCADO ABERTO' : 'MERCADO FECHADO';
      };

      // Effects
      useEffect(() => {
        const timer = setInterval(() => {
          setCurrentTime(new Date());
          setEdgeLatency(Math.floor(Math.random() * 15) + 8);
        }, 2000);
        return () => clearInterval(timer);
      }, []);

      // Render
      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 text-white overflow-hidden relative">
          {arMode && (
            <div className="fixed inset-0 bg-black/30 backdrop-blur-md z-50 flex items-center justify-center">
              <div className="bg-gradient-to-r from-cyan-500/95 to-purple-500/95 rounded-3xl p-10 border border-white/20 shadow-2xl max-w-2xl">
                <div className="text-center mb-8">
                  <div className="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-6">
                    <Glasses className="w-10 h-10" />
                  </div>
                  <h3 className="text-3xl font-bold mb-2">AR Mode Ativo</h3>
                  <p className="text-white/90 text-lg">Visualização holográfica dos dados financeiros</p>
                </div>
                <div className="grid grid-cols-2 gap-6 mb-8">
                  <div className="bg-white/10 rounded-xl p-6 text-center">
                    <div className="text-4xl font-bold text-cyan-300 mb-2">+{portfolioStats.returnPercentage.toFixed(1)}%</div>
                    <div className="text-sm">Portfolio Return</div>
                  </div>
                  <div className="bg-white/10 rounded-xl p-6 text-center">
                    <div className="text-4xl font-bold text-green-300 mb-2">94.2</div>
                    <div className="text-sm">AI Confidence</div>
                  </div>
                </div>
                <button 
                  onClick={() => setArMode(false)}
                  className="w-full py-4 bg-white/20 hover:bg-white/30 rounded-xl transition-all font-bold text-lg"
                >
                  Sair do Modo AR
                </button>
              </div>
            </div>
          )}

          <header className="border-b border-emerald-400/20 bg-black/40 backdrop-blur-2xl sticky top-0 z-40 shadow-2xl">
            <div className="max-w-8xl mx-auto px-6 py-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-6">
                  <div className="relative group">
                    <div className="w-16 h-16 bg-gradient-to-r from-amber-400 via-emerald-400 to-blue-400 rounded-2xl flex items-center justify-center transform group-hover:scale-110 transition-all duration-300 shadow-lg">
                      <Brain className="w-9 h-9 text-black animate-pulse" />
                    </div>
                    <div className="absolute -inset-2 bg-gradient-to-r from-amber-400 via-emerald-400 to-blue-400 rounded-2xl opacity-20 group-hover:opacity-40 transition-opacity blur-sm"></div>
                  </div>
                  <div>
                    <h1 className="text-5xl font-black bg-gradient-to-r from-amber-400 via-emerald-400 to-blue-400 bg-clip-text text-transparent">
                      WisdomInvest NEXUS
                    </h1>
                    <p className="text-sm text-emerald-300 flex items-center space-x-2">
                      <Sparkles className="w-4 h-4" />
                      <span>Next-Gen AI Investment Platform</span>
                      <Crown className="w-4 h-4 text-amber-400" />
                    </p>
                  </div>
                  <div className="hidden lg:flex items-center space-x-4 bg-black/30 rounded-xl px-4 py-2 border border-emerald-400/20">
                    <div className="flex items-center space-x-2">
                      <div className={`w-3 h-3 rounded-full ${marketStatus === 'open' ? 'bg-green-400 animate-pulse' : 'bg-red-400'}`}></div>
                      <span className={`text-sm font-bold ${getMarketStatusColor()}`}>
                        {getMarketStatusText()}
                      </span>
                    </div>
                    <div className="text-xs text-gray-400">
                      {currentTime.toLocaleTimeString('pt-BR')}
                    </div>
                    <div className="flex items-center space-x-1">
                      <Zap className="w-4 h-4 text-cyan-400" />
                      <span className="text-xs text-cyan-400">{edgeLatency}ms</span>
                    </div>
                  </div>
                </div>
                <div className="flex items-center space-x-4">
                  <div className="hidden xl:flex items-center space-x-2">
                    <button 
                      onClick={() => setVoiceEnabled(!voiceEnabled)}
                      className={`p-2 rounded-lg transition-all ${voiceEnabled ? 'bg-purple-600/20 text-purple-400' : 'bg-gray-600/20 text-gray-400'}`}
                    >
                      {voiceEnabled ? <Mic className="w-5 h-5" /> : <MicOff className="w-5 h-5" />}
                    </button>
                    <button 
                      onClick={() => setXaiMode(!xaiMode)}
                      className={`p-2 rounded-lg transition-all ${xaiMode ? 'bg-cyan-600/20 text-cyan-400' : 'bg-gray-600/20 text-gray-400'}`}
                    >
                      <Brain className="w-5 h-5" />
                    </button>
                    <button 
                      onClick={() => setEsgMode(!esgMode)}
                      className={`p-2 rounded-lg transition-all ${esgMode ? 'bg-green-600/20 text-green-400' : 'bg-gray-600/20 text-gray-400'}`}
                    >
                      <Leaf className="w-5 h-5" />
                    </button>
                    <button 
                      onClick={() => setArMode(!arMode)}
                      className={`p-2 rounded-lg transition-all ${arMode ? 'bg-pink-600/20 text-pink-400' : 'bg-gray-600/20 text-gray-400'}`}
                    >
                      <Glasses className="w-5 h-5" />
                    </button>
                  </div>
                  <div className="hidden xl:flex items-center space-x-2">
                    {masters.map(master => (
                      <div key={master.name} className="relative group">
                        <div className={`w-10 h-10 rounded-xl border-2 border-current ${master.color} flex items-center justify-center text-sm font-bold transition-all duration-300 hover:scale-125 cursor-pointer bg-black/30 backdrop-blur-sm shadow-lg hover:shadow-2xl`}>
                          <master.icon className="w-5 h-5" />
                          {master.external && (
                            <div className="absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full"></div>
                          )}
                        </div>
                      </div>
                    ))}
                  </div>
                  <div className="flex items-center space-x-2">
                    <button 
                      onClick={() => setShowAIChat(!showAIChat)}
                      className="p-3 rounded-xl bg-gradient-to-r from-purple-600/20 to-pink-600/20 text-purple-400 hover:from-purple-600/30 hover:to-pink-600/30 transition-all border border-purple-400/20"
                    >
                      <Brain className="w-6 h-6" />
                    </button>
                    <button 
                      onClick={() => setShowMarketplace(!showMarketplace)}
                      className="p-3 rounded-xl bg-gradient-to-r from-cyan-600/20 to-blue-600/20 text-cyan-400 hover:from-cyan-600/30 hover:to-blue-600/30 transition-all border border-cyan-400/20"
                    >
                      <Store className="w-6 h-6" />
                    </button>
                    <button 
                      onClick={() => setShowNews(!showNews)}
                      className="p-3 rounded-xl bg-orange-600/20 text-orange-400 hover:bg-orange-600/30 transition-all border border-orange-400/20 relative"
                    >
                      <Newspaper className="w-6 h-6" />
                      <div className="absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-xs font-bold">
                        {news.length}
                      </div>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </header>

          {showAIChat && (
            <div className="fixed left-6 top-24 w-96 h-[75vh] bg-black/95 backdrop-blur-xl rounded-2xl border border-purple-400/20 p-6 z-40 shadow-2xl">
              <div className="flex items-center justify-between mb-6">
                <h3 className="text-xl font-bold text-purple-400 flex items-center space-x-2">
                  <Brain className="w-6 h-6" />
                  <span>WisdomAI Assistant</span>
                </h3>
                <button 
                  onClick={() => setShowAIChat(false)}
                  className="text-gray-400 hover:text-white p-2 rounded-lg hover:bg-white/10"
                >
                  <X className="w-5 h-5" />
                </button>
              </div>
              <div className="space-y-4 h-[calc(100%-8rem)] overflow-y-auto">
                <div className="bg-purple-600/20 rounded-lg p-4 border border-purple-400/20">
                  <div className="text-sm text-purple-300 font-medium mb-2">WisdomAI</div>
                  <div className="text-sm">Olá! Eu sou sua IA especialista em investimentos. Posso analisar ativos, interpretar dados dos mestres e sugerir estratégias personalizadas. Como posso ajudar?</div>
                </div>
              </div>
              <div className="absolute bottom-6 left-6 right-6">
                <div className="flex space-x-2">
                  <input 
                    type="text" 
                    placeholder="Digite sua pergunta..." 
                    className="flex-1 px-4 py-3 bg-slate-800/50 border border-purple-400/30 rounded-lg focus:outline-none focus:border-purple-400 text-white text-sm"
                  />
                  <button className="px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 rounded-lg transition-all">
                    <Send className="w-4 h-4" />
                  </button>
                </div>
              </div>
            </div>
          )}

          {showNews && (
            <div className="fixed right-6 top-24 w-[32rem] h-[80vh] bg-black/95 backdrop-blur-xl rounded-2xl border border-orange-400/20 p-6 z-40 overflow-y-auto shadow-2xl">
              <div className="flex items-center justify-between mb-6">
                <h3 className="text-xl font-bold text-orange-300 flex items-center space-x-2">
                  <Newspaper className="w-6 h-6" />
                  <span>Market News LIVE</span>
                  <div className="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
                </h3>
                <button 
                  onClick={() => setShowNews(false)}
                  className="text-gray-400 hover:text-white p-2 rounded-lg hover:bg-white/10"
                >
                  <X className="w-5 h-5" />
                </button>
              </div>
              <div className="space-y-4">
                {news.map((item) => (
                  <div key={item.id} className="bg-slate-800/30 rounded-xl p-5 border border-slate-600/30 hover:border-orange-400/30 transition-all group cursor-pointer">
                    <div className="flex items-start justify-between mb-4">
                      <div className="flex items-center space-x-3">
                        <div className="w-3 h-3 rounded-full bg-green-400 animate-pulse" />
                        <span className="text-xs px-2 py-1 rounded-full font-medium bg-red-500/20 text-red-400">
                          {item.impact.toUpperCase()}
                        </span>
                        <span className="text-xs px-2 py-1 bg-green-500/20 text-green-400 rounded-full font-bold">
                          {item.priceImpact}
                        </span>
                      </div>
                      <ExternalLink className="w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity" />
                    </div>
                    <h4 className="font-bold text-sm text-orange-300 leading-tight mb-3">
                      {item.title}
                    </h4>
                    <p className="text-xs text-gray-400 mb-4 leading-relaxed">
                      {item.summary}
                    </p>
                    <div className="flex items-center justify-between text-xs mb-3">
                      <span className="text-gray-500">{item.source}</span>
                      <span className="text-gray-500">{item.timestamp}</span>
                    </div>
                    <div className="flex flex-wrap gap-2">
                      {item.relevantAssets.map(asset => (
                        <button
                          key={asset}
                          onClick={() => {
                            setSelectedAsset(asset);
                            setActiveTab('analyze');
                            setShowNews(false);
                          }}
                          className="px-3 py-1 bg-gradient-to-r from-orange-400/20 to-amber-400/20 text-orange-300 rounded-lg text-xs hover:from-orange-400/30 hover:to-amber-400/30 transition-all font-medium"
                        >
                          {asset}
                        </button>
                      ))}
                    </div>
                  </div>
                ))}
              </div>
            </div>
          )}

          <div className="max-w-8xl mx-auto px-6 py-8">
            <div className="flex space-x-1 bg-black/40 backdrop-blur-2xl rounded-2xl p-1 mb-8 overflow-x-auto border border-emerald-400/20 shadow-2xl">
              {[
                { id: 'dashboard', label: 'Command Center', icon: Home, color: 'from-blue-500 to-purple-500' },
                { id: 'analyze', label: 'Masters Analysis', icon: Brain, color: 'from-emerald-500 to-teal-500' },
                { id: 'portfolio', label: 'My Empire', icon: Briefcase, color: 'from-purple-500 to-pink-500' }
              ].map(tab => (
                <button
                  key={tab.id}
                  onClick={() => setActiveTab(tab.id)}
                  className={`flex items-center space-x-3 px-8 py-4 rounded-xl transition-all whitespace-nowrap font-medium ${
                    activeTab === tab.id 
                      ? `bg-gradient-to-r ${tab.color} text-white shadow-xl transform scale-105` 
                      : 'text-gray-400 hover:text-white hover:bg-white/10 hover:scale-105'
                  }`}
                >
                  <tab.icon className="w-6 h-6" />
                  <span className="text-lg">{tab.label}</span>
                  {activeTab === tab.id && <Sparkles className="w-5 h-5" />}
                </button>
              ))}
            </div>

            {activeTab === 'dashboard' && (
              <div className="space-y-8">
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                  {[
                    { title: 'Total Portfolio', value: formatCurrency(portfolioStats.currentValue), change: `${portfolioStats.returnPercentage > 0 ? '+' : ''}${portfolioStats.returnPercentage.toFixed(1)}%`, icon: Diamond },
                    { title: 'AI Confidence', value: '94.2%', change: '+2.1%', icon: Brain },
                    { title: 'ESG Score', value: portfolioStats.avgEsgScore.toFixed(1), change: '+5.2', icon: Leaf },
                    { title: 'Edge Latency', value: `${edgeLatency}ms`, change: 'Ultra Low', icon: Zap }
                  ].map((stat, index) => (
                    <div key={index} className="bg-gradient-to-br from-emerald-500/20 to-teal-500/20 backdrop-blur-xl rounded-2xl border border-white/10 p-6 hover:scale-105 transition-all duration-300 shadow-xl">
                      <div className="flex items-center justify-between mb-4">
                        <h3 className="text-lg font-bold text-white/90">{stat.title}</h3>
                        <div className="w-12 h-12 rounded-xl bg-gradient-to-r from-emerald-400 to-teal-400 flex items-center justify-center shadow-lg">
                          <stat.icon className="w-7 h-7 text-white" />
                        </div>
                      </div>
                      <div className="text-3xl font-black text-white mb-2">{stat.value}</div>
                      <div className="text-sm text-emerald-400 font-medium">{stat.change}</div>
                    </div>
                  ))}
                </div>
                <div className="bg-black/40 backdrop-blur-xl rounded-2xl border border-emerald-400/20 p-6 shadow-2xl">
                  <h3 className="text-xl font-bold mb-6 text-emerald-300 flex items-center space-x-2">
                    <BarChart3 className="w-6 h-6" />
                    <span>Portfolio Heat Map</span>
                    {esgMode && <Leaf className="w-5 h-5 text-green-400" />}
                  </h3>
                  <div className="grid grid-cols-2 gap-3">
                    {portfolio.map((item) => {
                      const gain = (item.currentPrice - item.avgPrice) / item.avgPrice * 100;
                      return (
                        <div 
                          key={item.symbol} 
                          className={`p-4 rounded-xl border transition-all cursor-pointer hover:scale-105 ${
                            gain > 5 ? 'bg-green-500/20 border-green-400/30' :
                            gain > 0 ? 'bg-emerald-500/20 border-emerald-400/30' :
                            gain > -5 ? 'bg-yellow-500/20 border-yellow-400/30' :
                            'bg-red-500/20 border-red-400/30'
                          }`}
                          onClick={() => {
                            setSelectedAsset(item.symbol);
                            setActiveTab('analyze');
                          }}
                        >
                          <div className="text-center">
                            <div className="font-bold text-lg">{item.symbol}</div>
                            <div className="text-sm text-gray-400 mb-2">{item.name}</div>
                            <div className={`text-lg font-bold ${gain >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                              {gain >= 0 ? '+' : ''}{gain.toFixed(1)}%
                            </div>
                            {esgMode && (
                              <div className="text-xs mt-1">
                                <span className="text-gray-400">ESG: </span>
                                <span className={`font-medium ${
                                  item.esgScore > 80 ? 'text-green-400' :
                                  item.esgScore > 60 ? 'text-yellow-400' : 'text-red-400'
                                }`}>
                                  {item.esgScore}
                                </span>
                              </div>
                            )}
                          </div>
                        </div>
                      );
                    })}
                  </div>
                </div>
              </div>
            )}

            {activeTab === 'analyze' && (
              <div className="space-y-8">
                <div className="flex space-x-1 bg-black/40 backdrop-blur-xl rounded-xl p-1 border border-emerald-400/20">
                  {[
                    { id: 'all', label: 'All Assets', icon: Globe, count: Object.keys(assets).length },
                    { id: 'acoes', label: 'Stocks', icon: TrendingUp, count: Object.values(assets).filter(a => a.type === 'Ação').length },
                    { id: 'fiis', label: 'REITs', icon: Building, count: Object.values(assets).filter(a => a.type === 'FII').length },
                    { id: 'crypto', label: 'Crypto', icon: Coins, count: Object.values(assets).filter(a => a.type === 'Crypto').length }
                  ].map(type => (
                    <button
                      key={type.id}
                      onClick={() => setActiveAssetType(type.id)}
                      className={`flex items-center space-x-3 px-6 py-3 rounded-lg transition-all ${
                        activeAssetType === type.id 
                          ? 'bg-gradient-to-r from-amber-400/30 to-emerald-400/30 text-emerald-300 shadow-xl' 
                          : 'text-gray-400 hover:text-white hover:bg-white/10'
                      }`}
                    >
                      <type.icon className="w-5 h-5" />
                      <span className="font-medium">{type.label}</span>
                      <span className="bg-white/20 px-2 py-1 rounded-full text-xs">{type.count}</span>
                    </button>
                  ))}
                </div>
                <div className="grid grid-cols-1 xl:grid-cols-2 gap-8">
                  <div className="bg-black/40 backdrop-blur-xl rounded-2xl border border-emerald-400/20 p-6 shadow-2xl">
                    <h2 className="text-2xl font-bold mb-6 text-emerald-300 flex items-center space-x-2">
                      <Search className="w-7 h-7" />
                      <span>Asset Selection</span>
                      <Gem className="w-6 h-6 text-amber-400" />
                    </h2>
                    <div className="space-y-6">
                      <div className="relative">
                        <Search className="absolute left-4 top-4 w-5 h-5 text-gray-400" />
                        <input
                          type="text"
                          placeholder="Search assets..."
                          className="w-full pl-12 pr-4 py-4 bg-slate-800/50 border border-emerald-400/30 rounded-xl focus:outline-none focus:border-emerald-400 text-white transition-colors text-lg"
                          value={searchTerm}
                          onChange={(e) => setSearchTerm(e.target.value)}
                        />
                      </div>
                      <div className="max-h-[32rem] overflow-y-auto space-y-3">
                        {Object.entries(assets)
                          .filter(([symbol, asset]) => {
                            const matchesType = 
                              (activeAssetType === 'acoes' && asset.type === 'Ação') ||
                              (activeAssetType === 'fiis' && asset.type === 'FII') ||
                              (activeAssetType === 'crypto' && asset.type === 'Crypto') ||
                              activeAssetType === 'all';
                            const matchesSearch = 
                              symbol.toLowerCase().includes(searchTerm.toLowerCase()) ||
                              asset.name.toLowerCase().includes(searchTerm.toLowerCase());
                            return matchesType && matchesSearch;
                          })
                          .map(([symbol, asset]) => (
                            <button
                              key={symbol}
                              onClick={() => setSelectedAsset(symbol)}
                              className={`w-full p-5 rounded-xl border transition-all text-left group ${
                                selectedAsset === symbol
                                  ? 'border-emerald-400 bg-emerald-400/20 shadow-2xl transform scale-[1.02]'
                                  : 'border-gray-600 hover:border-emerald-400/50 hover:bg-white/5 hover:scale-[1.01]'
                              }`}
                            >
                              <div className="flex justify-between items-start">
                                <div className="flex-1">
                                  <div className="flex items-center space-x-3 mb-2">
                                    <span className="font-bold text-xl">{symbol}</span>
                                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                                      asset.type === 'Ação' ? 'bg-blue-500/20 text-blue-400' :
                                      asset.type === 'FII' ? 'bg-green-500/20 text-green-400' :
                                      'bg-purple-500/20 text-purple-400'
                                    }`}>
                                      {asset.type}
                                    </span>
                                    {asset.recommendation === 'FORTE COMPRA' && (
                                      <Star className="w-4 h-4 text-amber-400 fill-current" />
                                    )}
                                  </div>
                                  <div className="text-sm text-gray-300 mb-1">{asset.name}</div>
                                  <div className="text-xs text-gray-500">{asset.sector}</div>
                                </div>
                                <div className="text-right">
                                  <div className="font-bold text-lg">{asset.price}</div>
                                  <div className="text-sm text-emerald-400">{asset.yield}</div>
                                  {asset.change && (
                                    <div className={`text-xs font-medium ${
                                      asset.change.startsWith('+') ? 'text-green-400' : 'text-red-400'
                                    }`}>
                                      {asset.change}
                                    </div>
                                  )}
                                </div>
                              </div>
                            </button>
                          ))}
                      </div>
                      <button
                        onClick={analyzeAsset}
                        disabled={!selectedAsset || isAnalyzing}
                        className="w-full py-4 bg-gradient-to-r from-amber-400 to-emerald-400 text-black font-bold rounded-xl hover:from-amber-300 hover:to-emerald-300 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-3 text-lg shadow-xl"
                      >
                        {isAnalyzing ? (
                          <>
                            <div className="w-6 h-6 border-2 border-black/30 border-t-black rounded-full animate-spin" />
                            <span>AI Analyzing...</span>
                          </>
                        ) : (
                          <>
                            <Brain className="w-6 h-6" />
                            <span>Analyze with Masters</span>
                          </>
                        )}
                      </button>
                    </div>
                  </div>
                  <div className="bg-black/40 backdrop-blur-xl rounded-2xl border border-emerald-400/20 p-6 shadow-2xl">
                    <h2 className="text-2xl font-bold mb-6 text-emerald-300 flex items-center space-x-2">
                      <BarChart3 className="w-7 h-7" />
                      <span>Masters Verdict</span>
                      <Crown className="w-6 h-6 text-amber-400" />
                    </h2>
                    {analysisResult ? (
                      <div className="space-y-6">
                        <div className="bg-slate-800/30 rounded-xl p-5 border border-slate-600/30">
                          <div className="flex justify-between items-start mb-4">
                            <div>
                              <h3 className="font-bold text-2xl">{analysisResult.asset.name}</h3>
                              <p className="text-sm text-gray-400">{selectedAsset} • {analysisResult.asset.sector}</p>
                              <p className="text-xs text-gray-500">{analysisResult.timestamp}</p>
                            </div>
                            <div className="text-right">
                              <div className="font-bold text-xl">{analysisResult.asset.price}</div>
                              <div className="text-sm text-emerald-400">{analysisResult.asset.yield}</div>
                            </div>
                          </div>
                        </div>
                        <div className="space-y-4">
                          <h4 className="font-semibold text-gray-300 flex items-center space-x-2 text-lg">
                            <Brain className="w-6 h-6" />
                            <span>Masters Analysis:</span>
                          </h4>
                          {masters.map(master => {
                            const scoreKey = master.name.toLowerCase().replace(/\s+/g, '_');
                            const score = analysisResult.scores[scoreKey];
                            return (
                              <div key={master.name} className="p-4 rounded-xl bg-slate-800/20 hover:bg-slate-800/40 transition-all">
                                <div className="flex items-center justify-between">
                                  <div className="flex items-center space-x-4">
                                    <div className={`w-12 h-12 rounded-xl border-2 ${master.color} border-current flex items-center justify-center font-bold transition-transform hover:scale-110 bg-black/20 shadow-lg`}>
                                      <master.icon className="w-6 h-6" />
                                    </div>
                                    <div>
                                      <span className="font-medium text-lg">{master.name}</span>
                                      <div className="text-xs text-gray-400">{master.strategy}</div>
                                    </div>
                                  </div>
                                  <div className="flex items-center space-x-4">
                                    <div className="w-32 h-4 bg-gray-700 rounded-full overflow-hidden">
                                      <div 
                                        className="h-full bg-gradient-to-r from-amber-400 to-emerald-400 transition-all duration-1000"
                                        style={{width: `${score}%`}}
                                      />
                                    </div>
                                    <span className={`text-lg font-bold min-w-[4rem] text-right ${
                                      score >= 90 ? 'text-green-400' :
                                      score >= 80 ? 'text-emerald-400' :
                                      score >= 70 ? 'text-yellow-400' :
                                      'text-red-400'
                                    }`}>
                                      {score}%
                                    </span>
                                  </div>
                                </div>
                              </div>
                            );
                          })}
                        </div>
                        <div className="bg-gradient-to-r from-amber-400/10 to-emerald-400/10 rounded-xl p-6 border border-emerald-400/30 shadow-xl">
                          <div className="flex items-center justify-between mb-6">
                            <span className="font-bold text-xl">Weighted Consensus</span>
                            <span className="text-5xl font-black text-emerald-400">{analysisResult.consensus}%</span>
                          </div>
                          <div className="flex items-center justify-between">
                            <div className={`inline-flex items-center space-x-3 px-6 py-3 rounded-full text-lg font-bold border-2 ${
                              analysisResult.recommendation === 'FORTE COMPRA' ? 'bg-green-500/20 text-green-400 border-green-500/30' :
                              analysisResult.recommendation === 'COMPRAR' ? 'bg-green-500/20 text-green-400 border-green-500/30' :
                              analysisResult.recommendation === 'MANTER' ? 'bg-blue-500/20 text-blue-400 border-blue-500/30' :
                              'bg-yellow-500/20 text-yellow-400 border-yellow-500/30'
                            }`}>
                              <CheckCircle className="w-6 h-6" />
                              <span>{analysisResult.recommendation}</span>
                            </div>
                          </div>
                        </div>
                        {analysisResult.relatedNews && analysisResult.relatedNews.length > 0 && (
                          <div className="space-y-3">
                            <h4 className="font-bold text-orange-300 flex items-center space-x-2">
                              <Newspaper className="w-5 h-5" />
                              <span>Related News:</span>
                            </h4>
                            {analysisResult.relatedNews.slice(0, 2).map((newsItem) => (
                              <div key={newsItem.id} className="p-3 bg-slate-800/20 rounded-lg border border-slate-600/20">
                                <div className="font-medium text-sm text-orange-300 mb-1">{newsItem.title}</div>
                                <div className="text-xs text-gray-400">{newsItem.summary.substring(0, 120)}...</div>
                                <div className="flex items-center justify-between mt-2">
                                  <span className="text-xs text-gray-500">{newsItem.timestamp}</span>
                                  <span className="text-xs px-2 py-1 bg-green-500/20 text-green-400 rounded">
                                    {newsItem.priceImpact}
                                  </span>
                                </div>
                              </div>
                            ))}
                          </div>
                        )}
                      </div>
                    ) : (
                      <div className="text-center py-20">
                        <Brain className="w-24 h-24 text-gray-400 mx-auto mb-6 opacity-30" />
                        <p className="text-gray-400 text-lg">Select an asset to begin AI analysis</p>
                        <p className="text-gray-500 text-sm mt-2">Our Masters are ready to provide insights</p>
                      </div>
                    )}
                  </div>
                </div>
              </div>
            )}

            {activeTab === 'portfolio' && (
              <div className="space-y-8">
                <div className="bg-black/40 backdrop-blur-xl rounded-2xl border border-emerald-400/20 p-8 shadow-2xl">
                  <h2 className="text-3xl font-bold mb-6 text-emerald-300 flex items-center space-x-2">
                    <Briefcase className="w-8 h-8" />
                    <span>My Investment Empire</span>
                    <Crown className="w-6 h-6 text-amber-400" />
                  </h2>
                  <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div className="bg-gradient-to-br from-emerald-500/20 to-teal-500/20 rounded-xl p-6">
                      <h3 className="text-lg font-bold text-emerald-300 mb-2">Total Value</h3>
                      <div className="text-3xl font-black text-white">{formatCurrency(portfolioStats.currentValue)}</div>
                      <div className={`text-sm ${portfolioStats.returnPercentage >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                        {portfolioStats.returnPercentage >= 0 ? '+' : ''}{portfolioStats.returnPercentage.toFixed(2)}%
                      </div>
                    </div>
                    <div className="bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-xl p-6">
                      <h3 className="text-lg font-bold text-blue-300 mb-2">Total Return</h3>
                      <div className={`text-3xl font-black ${portfolioStats.totalReturn >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                        {formatCurrency(portfolioStats.totalReturn)}
                      </div>
                      <div className="text-sm text-gray-400">Since inception</div>
                    </div>
                    <div className="bg-gradient-to-br from-green-500/20 to-emerald-500/20 rounded-xl p-6">
                      <h3 className="text-lg font-bold text-green-300 mb-2">ESG Score</h3>
                      <div className="text-3xl font-black text-white">{portfolioStats.avgEsgScore.toFixed(1)}</div>
                      <div className="text-sm text-green-400">Sustainable</div>
                    </div>
                    <div className="bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-xl p-6">
                      <h3 className="text-lg font-bold text-purple-300 mb-2">Positions</h3>
                      <div className="text-3xl font-black text-white">{portfolio.length}</div>
                      <div className="text-sm text-gray-400">Assets</div>
                    </div>
                  </div>
                  <div className="space-y-4">
                    {portfolio.map((holding) => {
                      const gain = (holding.currentPrice - holding.avgPrice) / holding.avgPrice * 100;
                      const totalValue = holding.quantity * holding.currentPrice;
                      return (
                        <div key={holding.symbol} className="bg-slate-800/30 rounded-xl p-6 border border-slate-600/30 hover:border-emerald-400/50 transition-all">
                          <div className="flex items-center justify-between">
                            <div className="flex items-center space-x-4">
                              <div className={`w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg ${
                                gain >= 0 ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'
                              }`}>
                                {holding.symbol.substring(0, 2)}
                              </div>
                              <div>
                                <h3 className="font-bold text-xl">{holding.symbol}</h3>
                                <p className="text-gray-400">{holding.name}</p>
                                <p className="text-sm text-gray-500">{holding.quantity} shares @ {formatCurrency(holding.avgPrice)}</p>
                              </div>
                            </div>
                            <div className="text-right">
                              <div className="font-bold text-xl">{formatCurrency(totalValue)}</div>
                              <div className={`text-lg font-medium ${gain >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                {gain >= 0 ? '+' : ''}{gain.toFixed(2)}%
                              </div>
                              <div className="text-sm text-gray-400">Current: {formatCurrency(holding.currentPrice)}</div>
                            </div>
                            {esgMode && (
                              <div className="text-center">
                                <div className="text-sm text-gray-400 mb-1">ESG Score</div>
                                <div className={`text-2xl font-bold ${
                                  holding.esgScore > 80 ? 'text-green-400' :
                                  holding.esgScore > 60 ? 'text-yellow-400' : 'text-red-400'
                                }`}>
                                  {holding.esgScore}
                                </div>
                              </div>
                            )}
                          </div>
                        </div>
                      );
                    })}
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    };

    ReactDOM.render(<WisdomInvestNEXUS />, document.getElementById('root'));
  </script>
</body>
</html>